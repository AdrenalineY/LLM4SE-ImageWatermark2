# Photo Watermark 2 基础功能使用说明 v3.0

本指南面向下载并运行 Photo Watermark 2 最新版本（v3.0）的用户，覆盖《IMPLEMENTATION_PLAN.md》第一阶段的全部基础能力以及《ADVANCED_FEATURE_EXTENSION.md》中定义的高级功能扩展，帮助您快速掌握解压、启动、配置水印与批量导出的完整流程。

---

## 1. 环境准备

- **支持系统**：Windows 10 / Windows 11（64 位）
- **硬盘空间**：解压后约 250 MB（含依赖与缓存）
- **权限需求**：普通用户权限即可；首次运行可能需在安全提醒中选择“仍要运行”
- **外部依赖**：应用已内置所需运行库，无需预装 Python 或其他第三方组件

> 提示：若使用高分辨率显示器，建议在 Windows 设置中开启缩放，以获得最佳视觉体验。

---

## 2. 下载与解压

1. 从官方发布页面下载最新压缩包（如 `PhotoWatermark2_v3.0_Windows.zip`）。
2. 在文件资源管理器中右键压缩包，选择“全部提取”。
3. 解压后获得 `PhotoWatermark2` 目录，默认包含：
   - `PhotoWatermark2.exe`：应用程序入口，可直接双击运行。
   - `_internal/`：运行时依赖文件夹，请与可执行文件保持同级，勿移动或删除。
   - `config/`：保存默认水印模板与用户配置的文件夹。
   - `logs/`：运行日志输出目录，便于排查问题。
   - `BASIC_USAGE_GUIDE_v3.0.md`：本文档，建议妥善保存以便快速查阅。

---

## 3. 首次启动

1. 打开解压后的 `PhotoWatermark2` 目录。
2. 双击 `PhotoWatermark2.exe`，首次加载可能耗时 3~5 秒。
3. 若弹出 SmartScreen 或杀毒软件提醒，请选择“更多信息” → “仍要运行”或在安全软件中添加白名单。
4. 启动成功后将看到三栏式主界面。

---

## 4. 主界面速览

| 区域 | 功能概述 |
| --- | --- |
| **左侧：图片资源面板** | 显示已导入图片的缩略图、文件名与尺寸信息，支持多选与排序。|
| **中间：实时预览区** | 展示当前选中图片及所有水印效果，可拖拽水印进行微调。|
| **右侧：控制面板** | 以标签页形式集中配置文本水印、图片水印、高级导出、模板管理等选项。|
| **底部状态栏** | 显示导入/导出进度、错误提示、当前模板名称等实时信息。|

---

## 5. 文件导入与管理

### 5.1 导入方式
- **导入图片**：点击左上角“导入图片”按钮，支持多选常见格式（PNG/JPG/BMP/WebP）。
- **导入文件夹**：点击“导入文件夹”，可一次性加载整个目录。
- **拖拽导入**：直接将图片或文件夹拖入左侧面板即可。

### 5.2 列表操作
- **预览切换**：单击缩略图切换当前预览目标。
- **批量选择**：支持 `Ctrl` / `Shift` 快捷键进行多选；右键菜单提供移除、重新排序等操作。
- **快速过滤**：顶部搜索框可按文件名或类型过滤列表项。

---

## 6. 文本水印功能

文本水印设置位于右侧“文本水印”标签页，分为内容、样式、布局、效果四大区域。

### 6.1 内容与样式
- **水印文本**：在文本输入框中直接键入，支持多行内容；内容更新后预览即时刷新。
- **字体选择**：通过 `QFontComboBox` 选择系统字体，内置智能字体解析，可在导出时保持加粗/斜体等样式。
- **字号**：使用 `字号` 旋钮（12~200）调整文字大小。
- **粗体 / 斜体**：点击相应按钮切换，导出图像会忠实还原预览效果。
- **文字颜色**：点击“文字颜色”按钮唤起 `QColorDialog`，支持吸管与历史记录。

### 6.2 布局与对齐
- **位置九宫格**：单击快速定位到九个常用位置。
- **预览拖拽**：在中间预览区直接拖动文本，实现精细定位。
- **对齐方式**：可切换左对齐、居中、右对齐，便于多行文本排版。

### 6.3 高级效果
- **透明度**：滑块设置 0~100% 透明度。
- **阴影**：启用后可自定义阴影偏移与颜色，增强对比度。
- **描边**：可设置描边宽度与颜色，适用于复杂背景。

### 6.4 旋转与缩放
- **旋转角度**：滑块范围 -180° 至 180°，实时预览变化。
- **缩放模式**：在保持字体结构的同时按照整体缩放比例放大或缩小。

---

## 7. 图片水印功能

在“图片水印”标签页中启用图像素材叠加。

1. **选择图片**：点击“选择水印图片”导入 PNG / JPG / WebP 文件，建议使用带透明通道的 PNG。
2. **缩放比例**：滑块控制 5%~400% 的相对大小。
3. **透明度**：独立滑块设置图片水印的不透明度。
4. **混合模式**（可选）：提供正常、正片叠底、屏幕等多种混合方式，让水印更贴合背景。
5. **位置与旋转**：与文本水印共享预览拖拽与旋转滑块，实现叠加排版。

> 注意：文本水印与图片水印可同时启用，支持多元素叠加，预览区会叠加展示最终效果。

---

## 8. 导出设置

### 8.1 基础导出流程
1. 在控制面板“导出设置”标签页中点击“批量导出”。
2. 选择输出目录（建议与原图不同的文件夹）。
3. 设置文件命名规则：
   - 保持原名
   - 添加前缀（如 `WM_`）
   - 添加后缀（如 `_watermark`）
4. 选择输出格式：PNG、JPEG、WebP 等。

### 8.2 高级导出选项
- **JPEG 质量**：0~100 可调。
- **WebP 压缩**：提供有损/无损模式切换。
- **尺寸调整**：勾选“启用尺寸调整”后，可按以下策略处理：
  - 按宽度：指定目标宽度，自动等比缩放。
  - 按高度：指定目标高度，自动等比缩放。
  - 按百分比：输入缩放比例（如 50%）。
  - 可选择是否保持宽高比。
- **色域转换**：在需要时可转换为 sRGB，保证跨设备显示一致。

### 8.3 批量处理
- 导出进度条实时显示已完成/总数。
- 状态栏提供异常提示，日志文件记录每张图片处理结果。
- 可配置并发线程数，以平衡性能与系统负载。

---

## 9. 模板与配置

### 9.1 模板管理
- **保存模板**：在“模板”标签页中点击“保存当前模板”，为当前全部设置命名并存档。
- **加载模板**：选择已有模板即可一键恢复完整配置。
- **重命名 / 删除**：右键模板列表项可执行重命名、删除操作。
- **导入 / 导出模板**：支持 `.json` 文件，便于跨设备共享。

### 9.2 配置文件结构
- 用户模板与设置保存在 `config/` 文件夹内：
  - `user_settings.json`：最近一次操作记录，程序启动时自动加载。
  - `templates/`：存放自定义模板文件。
- 建议在备份或迁移时保留整个 `config/` 目录。

---

## 10. 常见问题与排查

| 问题场景 | 处理建议 |
| --- | --- |
| 程序启动被拦截 | 将 `PhotoWatermark2.exe` 加入安全软件白名单，或在属性中解除阻止。 |
| 字体样式导出不一致 | 确认系统已安装目标字体的加粗/斜体变体；导出日志会提示加载的具体字体文件。 |
| 图片导出失败 | 检查输出目录是否有写入权限，确保磁盘空间充足。 |
| 模板加载无效 | 确认模板文件未被手动修改；如损坏，可删除后重新保存。 |
| 批量导出速度慢 | 可在设置中降低并发线程数或关闭实时预览刷新。 |

> 如果遇到未列出的情况，可打开 `logs/` 目录中的最新日志文件，将错误信息反馈至官方 Issue 区以便排查。

---

## 11. 推荐工作流程

1. **导入资源** → 导入单张或批量图片。
2. **选择模板** → 可加载历史模板，或重置为默认样式。
3. **自定义文本/图片水印** → 调整内容、字体、颜色、阴影、位置等。
4. **预览确认** → 在预览区确保文本与图片水印叠加效果符合预期。
5. **配置导出选项** → 选择输出格式、命名规则、尺寸调整与压缩参数。
6. **保存模板（可选）** → 满意当前配置时可保存模板以便下次复用。
7. **批量导出** → 开始任务，等待进度完成即可。

---

## 12. 获取支持

- **项目主页**：`https://github.com/AdrenalineY/LLM4SE-ImageWatermark2`
- **问题反馈**：在 GitHub Issues 中提交问题，附带操作步骤、日志与截图。
- **版本更新**：关注 Release 页面获取最新修复与功能扩展。

感谢使用 Photo Watermark 2，祝您创作顺利！
